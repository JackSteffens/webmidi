<div layout-margin>
    <h1>Select a MIDI device</h1>

    <midi-selector
            inputs="midiInputs"
            outputs="midiOutputs"
            selected-input="midiSelectedInput"
            selected-output="midiSelectedOutput"
            select-port="selectPort">
    </midi-selector>

    <div layout="column">
        <span>debug info</span>
        <span>Selected output state: {{midiSelectedOutput.connection}}</span>
        <span>Selected input state: {{midiSelectedInput.connection}}</span>
        <span> Last command: {{lastCommand}}</span>
    </div>

    <md-input-container>
        <label>minkey</label>
        <input ng-model="minKey" placeholder="21" type="number" min="0" max="126">
    </md-input-container>

    <md-input-container>
        <label>maxkey</label>
        <input ng-model="maxKey" placeholder="108" type="number" min="1" max="127">
    </md-input-container>
    <br>
    <md-button ng-click="resetKeys()">reset {{keys.length}} keys</md-button>
    <md-button ng-click="createVirtualKeyboard()">Create virtual keyboard</md-button>


    <md-button
            ng-disabled="
            !midiSelectedOutput ||
            !midiSelectedInput ||
            (midiSelectedOutput && midiSelectedOutput.connection === 'closed') ||
            (midiSelectedInput && midiSelectedInput.connection === 'closed') ||
            keys.length === 0"
            ui-sref="lobby"
            class="md-raised md-primary">
        Continue
    </md-button>
</div>